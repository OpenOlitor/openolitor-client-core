"use strict";function convertDateStringsToDates(e){if("object"!=typeof e)return e;for(var t in e)if(e.hasOwnProperty(t)){var n,r=e[t];if("string"==typeof r&&(n=r.match(regexIso8601))){var a=Date.parse(n[0]);isNaN(a)||(e[t]=new Date(a))}else"object"==typeof r&&(e[t]=convertDateStringsToDates(r))}return e}function addExtendedEnumValue(e,t,n,r){return{id:e,label:{long:t,short:n},value:r}}function gettext(e){return e}var regexIso8601=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])(\d{2}):(\d{2}))?$/,userRoles={Guest:"Guest",Administrator:"Administrator",Kunde:"Kunde"};angular.module("openolitor-core",["ngAnimate","ngResource","ngRoute","ngSanitize","ngTouch","ngTable","ngFileSaver","ngCookies","ngPasswordStrength","ngMessages","angular.filter","ui.bootstrap","ui.bootstrap.datetimepicker","color.picker","ipCookie","frapontillo.bootstrap-switch","gettext","ngHamburger","angularMoment","ngFileUpload","ngLodash","angular-sortable-view","angular-loading-bar"]).constant("API_URL","@@API_URL").constant("API_WS_URL","@@API_WS_URL").constant("BUILD_NR","@@BUILD_NR").constant("ENV","@@ENV").constant("LIEFERRHYTHMEN",{WOECHENTLICH:gettext("Woechentlich"),ZWEIWOECHENTLICH:gettext("Zweiwoechentlich"),MONATLICH:gettext("Monatlich"),UNREGELMAESSIG:gettext("Unregelmaessig")}).constant("PREISEINHEITEN",{LIEFERUNG:gettext("Lieferung")}).constant("VERTRIEBSARTEN",{DEPOTLIEFERUNG:gettext("Depotlieferung"),HEIMLIEFERUNG:gettext("Heimlieferung"),POSTLIEFERUNG:gettext("Postlieferung")}).constant("LAUFZEITEINHEITEN",{UNBESCHRAENKT:gettext("Unbeschraenkt"),LIEFERUNGEN:gettext("Lieferungen"),MONATE:gettext("Monate")}).constant("FRISTEINHEITEN",{MONATE:"Monate",WOCHEN:"Wochen"}).constant("ANREDE",{KEINE:addExtendedEnumValue(void 0,gettext("Keine"),gettext("-")),HERR:addExtendedEnumValue("Herr",gettext("Herr"),gettext("Hr.")),FRAU:addExtendedEnumValue("Frau",gettext("Frau"),gettext("Fr."))}).constant("ABOTYPEN",{DEPOTLIEFERUNGABO:gettext("DepotlieferungAbo"),HEIMLIEFERUNGABO:gettext("HeimlieferungAbo"),POSTLIEFERUNGABO:gettext("PostlieferungAbo")}).constant("LIEFERSTATUS",{UNGEPLANT:gettext("Ungeplant"),OFFEN:gettext("Offen"),ABGESCHLOSSEN:gettext("Abgeschlossen"),VERRECHNET:gettext("Verrechnet")}).constant("RECHNUNGSTATUS",{ERSTELLT:gettext("Erstellt"),VERSCHICKT:gettext("Verschickt"),BEZAHLT:gettext("Bezahlt"),MAHNUNG_VERSCHICKT:gettext("MahnungVerschickt"),STORNIERT:gettext("Storniert")}).constant("LIEFEREINHEIT",{STUECK:addExtendedEnumValue("Stueck",gettext("Stück"),gettext("St.")),BUND:addExtendedEnumValue("Bund",gettext("Bund"),gettext("Bu.")),GRAMM:addExtendedEnumValue("Gramm",gettext("Gramm"),gettext("gr")),KILOGRAMM:addExtendedEnumValue("Kilogramm",gettext("Kilogramm"),gettext("kg")),LITER:addExtendedEnumValue("Liter",gettext("Liter"),gettext("l"))}).constant("ABOTYPEN_ARRAY",["DepotlieferungAbo","HeimlieferungAbo","PostlieferungAbo"]).constant("WAEHRUNG",{CHF:addExtendedEnumValue("CHF",gettext("Schweizer Franken"),gettext("CHF")),EUR:addExtendedEnumValue("EUR",gettext("Euro"),gettext("EUR")),USD:addExtendedEnumValue("USD",gettext("US Dollar"),gettext("USD")),GBP:addExtendedEnumValue("GBP",gettext("Britisches Pfund"),gettext("GBP")),CAD:addExtendedEnumValue("CAD",gettext("Kanadischer Dollar"),gettext("CAD"))}).constant("LIEFERZEITPUNKTE",{MONTAG:addExtendedEnumValue("Montag",gettext("Montag"),gettext("MO"),1),DIENSTAG:addExtendedEnumValue("Dienstag",gettext("Dienstag"),gettext("DI"),2),MITTWOCH:addExtendedEnumValue("Mittwoch",gettext("Mittwoch"),gettext("MI"),3),DONNERSTAG:addExtendedEnumValue("Donnerstag",gettext("Donnerstag"),gettext("DO"),4),FREITAG:addExtendedEnumValue("Freitag",gettext("Freitag"),gettext("FR"),5),SAMSTAG:addExtendedEnumValue("Samstag",gettext("Samstag"),gettext("SA"),6),SONNTAG:addExtendedEnumValue("Sonntag",gettext("Sonntag"),gettext("SO"),7)}).constant("MONATE",{JANUAR:addExtendedEnumValue("Januar",gettext("Januar"),gettext("Jan"),1),FEBRUAR:addExtendedEnumValue("Februar",gettext("Februar"),gettext("Feb"),2),MAERZ:addExtendedEnumValue("Maerz",gettext("März"),gettext("Mar"),3),APRIL:addExtendedEnumValue("April",gettext("April"),gettext("Apr"),4),MAI:addExtendedEnumValue("Mai",gettext("Mai"),gettext("Mai"),5),JUNI:addExtendedEnumValue("Juni",gettext("Juni"),gettext("Jun"),6),JULI:addExtendedEnumValue("Juli",gettext("Juli"),gettext("Jul"),7),AUGUST:addExtendedEnumValue("August",gettext("August"),gettext("Aug"),8),SEPTEMBER:addExtendedEnumValue("September",gettext("September"),gettext("Sep"),9),OKTOBER:addExtendedEnumValue("Oktober",gettext("Oktober"),gettext("Okt"),10),NOVEMBER:addExtendedEnumValue("November",gettext("November"),gettext("Nov"),11),DEZEMBER:addExtendedEnumValue("Dezember",gettext("Dezember"),gettext("Dez"),12)}).constant("PENDENZSTATUS",{AUSSTEHEND:gettext("Ausstehend"),ERLEDIGT:gettext("Erledigt"),NICHTERLEDIGT:gettext("NichtErledigt")}).constant("AUSLIEFERUNGSTATUS",{ERFASST:gettext("Erfasst"),AUSGELIEFERT:gettext("Ausgeliefert")}).run(["$rootScope","$location",function(e,t){e.location=t}]).factory("checkSize",["$rootScope","$window",function(e,t){return function(){t.innerWidth>=1200&&(e.tgState=!0)}}]).factory("exportTable",["FileSaver",function(e){return function(t,n){t.exportODS(function(t){e.saveAs(t.response,n)})}}]).factory("exportODSModuleFunction",function(){return{params:{exportType:".ods"},method:"GET",responseType:"arraybuffer",cache:!0,transformResponse:function(e){var t;return e&&(t=new Blob([e],{type:"application/vnd.oasis.opendocument.spreadsheet"})),{response:t}}}}).factory("cloneObj",function(){return function(e){return angular.copy(e)}}).factory("msgBus",["$rootScope",function(e){var t={};return t.emitMsg=function(t){e.$emit(t.type,t)},t.onMsg=function(t,n,r){var a=e.$on(t,r);n.$on("$destroy",a)},t}]).run(["ooClientMessageService",function(e){console.log("Start clientMessageService"),e.start()}]).config(["$httpProvider",function(e){e.defaults.transformResponse.push(function(e){return convertDateStringsToDates(e)})}]).config(["$locationProvider",function(e){e.hashPrefix("")}]).config(["$qProvider",function(e){e.errorOnUnhandledRejections(!1)}]).run(["alertService","$rootScope","msgBus","gettextCatalog",function(e,t,n,r){t.$removeAlert=e.removeAlert(),n.onMsg("ChangeLang",t,function(e,t){console.log("Got ChangeLang Message"+t.reason),r.setCurrentLanguage(t.reason)})}]).config(["$provide",function(e){e.decorator("$exceptionHandler",["$log","$injector",function(e,t){return function(n){t.get("alertService").addAlert("error",n.message),e.error.apply(e,arguments)}}])}]).filter("fromNow",["moment",function(e){return function(t){return e(t).fromNow()}}]).filter("lastElement",function(){return function(e,t){if(e)return angular.isArray(e)?e[e.length-1]?t?e[e.length-1][t]:e[e.length-1]:void 0:e&&t?e[t]:e}}).filter("firstElement",function(){return function(e,t){if(e)return angular.isArray(e)?e[0]?t?e[0][t]:e[0]:void 0:e&&t?e[t]:e}}).filter("notIn",function(){return function(e,t,n){var r=[];if(!e)return r;for(var a=0;a<e.length;a++){var o=e[a],i=o[t];n.indexOf(i)<0&&r.push(o)}return r}}).config(["cfpLoadingBarProvider",function(e){e.includeSpinner=!1}]).config(["$routeProvider",function(e){e.when("/login",{templateUrl:"scripts/login/login.html",controller:"LoginController",name:"Login",access:userRoles.Guest}).when("/passwd",{templateUrl:"scripts/login/change_password.html",controller:"LoginController",name:"Passwortwechsel",access:[userRoles.Administrator,userRoles.Kunde]}).when("/logout",{templateUrl:"scripts/login/logout.html",controller:"LoginController",logout:!0,name:"Logout",access:userRoles.Guest}).when("/forbidden",{templateUrl:"scripts/login/forbidden.html",controller:"LoginController",name:"Forbidden",access:userRoles.Guest}).when("/zugangaktivieren",{templateUrl:"scripts/login/zugangaktivieren.html",controller:"LoginController",name:"Einladung",access:userRoles.Guest}).when("/passwordreset",{templateUrl:"scripts/login/passwordreset.html",controller:"LoginController",name:"PasswordReset",access:userRoles.Guest}).otherwise({templateUrl:"scripts/not-found.html",access:userRoles.Guest})}]),angular.module("openolitor-core").controller("OpenOlitorRootController",["$scope","$rootScope","ServerService","ProjektService","gettextCatalog","amMoment","$location","msgBus","checkSize","$window","$timeout","BUILD_NR","ENV","ooAuthService","$cookies",function(e,t,n,r,a,o,i,s,l,d,c,u,g,p,m){angular.element(d).bind("resize",function(){l()}),e.currentPathContains=function(e){return-1!==i.url().indexOf(e)},l(),e.connected=!1;var f=e.$watch(function(){return p.getUser()},function(n){e.loggedIn=p.isUserLoggedIn(n),e.user=n,e.loggedIn&&r.resolveProjekt().then(function(n){e.projekt=n,t.projekt=n})});c(function(){e.menushow[angular.element(".sidebar-nav .active").parent().attr("activate-id")]=!0},0);var h=e.$watch(n.getStaticServerInfo,function(t){angular.isUndefined(t)||(e.serverInfo=t,e.connected=!0)});if(e.buildNr=u,e.env=g,s.onMsg("WebSocketClosed",t,function(t,n){e.connected=!1,e.messagingSocketClosedReason=n.reason,angular.isUndefined(e.messagingSocketClosedSetter)&&(e.messagingSocketClosedSetter=c(function(){e.showConnectionErrorMessage=!0,e.messagingSocketClosedSetter=void 0},3e4)),e.$apply()}),s.onMsg("WebSocketOpen",t,function(){e.connected=!0,e.showConnectionErrorMessage=!1,angular.isUndefined(e.messagingSocketClosedSetter)||angular.isUndefined(e.messagingSocketClosedSetter.close)||(e.messagingSocketClosedSetter.close(),e.messagingSocketClosedSetter=void 0),e.messagingSocketClosedReason="",e.$apply()}),e.changeLang=function(t){angular.isUndefined(t)||(a.setCurrentLanguage(t),o.changeLocale(t),e.storeActiveLang(t),e.$emit("languageChanged"))},e.activeLang=function(){return a.getCurrentLanguage()},e.storedActiveLang=function(){return m.get("activeLang")},e.storeActiveLang=function(e){m.put("activeLang",e)},angular.isUndefined(e.storedActiveLang())){var v=d.navigator.language||d.navigator.userLanguage;v.indexOf("de-")>0?e.changeLang("de"):v.indexOf("fr-")>0?e.changeLang("fr"):v.indexOf("en-")>0?e.changeLang("en"):e.changeLang("de")}else e.changeLang(e.storedActiveLang());e.$on("destroy",function(){f(),h()})}]),angular.module("openolitor-core").filter("ooPreisProEinheit",["gettext","$filter",function(e,t){return function(n){return e(n.waehrung)+" "+t("ooCHF")(n.preis)+" "+e("pro")+" "+e(n.preiseinheit)}}]),angular.module("openolitor-core").filter("ooCHF",["$filter",function(e){return function(t,n){var r="";return n&&(r+="CHF "),r+=e("number")(t,2)}}]),angular.module("openolitor-core").directive("ooErrorOverlay",function(){return{restrict:"AE",transclude:!0,templateUrl:"scripts/common/components/oo-erroroverlay.directive.html",scope:!0}}),angular.module("openolitor-core").directive("ooDropdown",function(){return{restrict:"E",replace:!0,scope:{placeholder:"@",values:"=",selected:"=",selectedProp:"@",selectedFunction:"&?",selectedFunctionScope:"=",property:"@",displayFunction:"=",dropdownId:"@",displayStyle:"@",label:"=",disabled:"=",selectionRequired:"="},templateUrl:"scripts/common/components/oo-dropdown.directive.html",compile:function(e,t){t.displayStyle||(t.displayStyle="navbar")},controller:["$scope",function(e){e.listVisible=!1,e.display="",e.isPlaceholder=!0,e.selectedItem=void 0;var t=function(e,t){var n,r=t.split("."),a=e;for(n=0;n<r.length;++n){if(void 0===a[r[n]])return;a=a[r[n]]}return a};e.select=function(n){e.isPlaceholder=!1,angular.isDefined(e.selectedProp)?e.selected=t(n,e.selectedProp):e.selected=n,e.selectedItem=n,angular.isDefined(e.selectedFunction)&&e.selectedFunction()(e.selectedItem,e.selectedFunctionScope)&&(e.selectedItem=void 0,e.selected=void 0),e.updateDisplay()},e.getDisplayedText=function(n){return angular.isUndefined(e.property)?angular.isUndefined(e.displayFunction)?n:e.displayFunction(n):t(n,e.property)},e.getClass=function(){return e.selectionRequired&&angular.isUndefined(e.selected)?"oo-invalid":""},e.updateDisplay=function(){e.isPlaceholder=angular.isUndefined(e.selected),angular.isUndefined(e.displayFunction)||angular.isUndefined(e.selectedItem)?e.property?!angular.isUndefined(e.selected)&&angular.isUndefined(e.selectedItem)?angular.forEach(e.values,function(n){angular.isUndefined(e.selectedProp)?n===e.selected&&(e.display=n):t(n,e.selectedProp)===e.selected&&(e.display=t(n,e.property))}):angular.isUndefined(e.selectedItem)||(e.display=t(e.selectedItem,e.property)):!angular.isUndefined(e.selected)&&angular.isUndefined(e.selectedItem)?e.display=e.selected:e.display=e.selectedItem:e.display=e.displayFunction(e.selectedItem)},e.updateDisplay(),e.unwatchSelected=e.$watch("selected",function(){angular.isUndefined(e.selected)||e.updateDisplay()},!0)}]}}),angular.module("openolitor-core").directive("ooLiefertage",["EnumUtil","LIEFERZEITPUNKTE",function(e,t){return{restrict:"E",replace:!0,scope:{liefertag:"=",required:"="},transclude:!0,templateUrl:"scripts/common/components/oo-liefertage.directive.html",controller:["$scope",function(n){n.liefertage=e.asArray(t),n.isSelected=function(e){return n.liefertag&&n.liefertag===e.id?"active":""},n.selectedLiefertag=function(e){n.liefertag=e.id}}]}}]),angular.module("openolitor-core").directive("ooDatepickerPopup",function(){return{restrict:"EAC",require:"ngModel",link:function(e,t,n,r){r.$formatters.shift()}}}).directive("ooDatepicker",[function(){return{restrict:"EA",require:"ngModel",scope:{ngModel:"=",ngClass:"=",dayFormat:"=",monthFormat:"=",yearFormat:"=",dayHeaderFormat:"=",dayTitleFormat:"=",monthTitleFormat:"=",startingDay:"=",yearRange:"=",dateFormat:"=",minDate:"=",maxDate:"=",dateOptions:"=",dateDisabled:"&",hourStep:"=",minuteStep:"=",showMeridian:"=",meredians:"=",mousewheel:"=",readonlyTime:"=",readonlyDate:"=",ngChange:"="},template:function(e,t){function n(e){return e.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()})}function r(e,r){var a=angular.isDefined(r)?r:e;return t[a]?n(e)+'="'+a+'" ':""}function a(e,r){var a=angular.isDefined(r)?r:e;return t[a]?n(e)+'="'+t[a]+'" ':n(e)+" "}return'<div class="datetimepicker-wrapper"><input class="form-control" type="text" ng-click="open($event)" ng-change="ngChange" is-open="opened" ng-class="ngClass" ng-model="ngModel" '+[["minDate"],["maxDate"],["dayFormat"],["monthFormat"],["yearFormat"],["dayHeaderFormat"],["dayTitleFormat"],["monthTitleFormat"],["startingDay"],["yearRange"],["datepickerOptions","dateOptions"],["ngDisabled","readonlyDate"]].reduce(function(e,t){return e+r.apply(null,t)},"")+function(e,r,a){var o=angular.isDefined(a)?a:e;return t[o]?n(e)+'="'+o+"({"+r+'})" ':""}("dateDisabled","date: date, mode: mode")+a("uibDatepickerPopup","dateFormat")+a("currentText","currentText")+a("clearText","clearText")+a("closeText","closeText")+a("placeholder","placeholder")+"/>\n</div>\n"},controller:["$scope",function(e){e.open=function(t){t.preventDefault(),t.stopPropagation(),e.opened=!0}}]}}]),angular.module("openolitor-core").directive("ooKundentypen",["KundentypenService",function(e){return{restrict:"E",replace:!0,scope:{kundentypenList:"="},transclude:!0,templateUrl:"scripts/common/components/oo-kundentypen.directive.html",controller:["$scope",function(t){var n=function(){t.kundentypenList&&t.allKundentypen&&(t.kundentypen=[],angular.forEach(t.allKundentypen,function(e){var n=e.kundentyp?e.kundentyp:e,r=t.kundentypenList.indexOf(n);n.length>0&&r<0&&t.kundentypen.push(n)}))};t.$watch(e.getKundentypen,function(e){e&&(t.allKundentypen=e,n())});var r=t.$watchCollection("kundentypenList",function(){t.kundentypenList&&t.kundentypenList.length>0&&(n(),r())});t.addKundentyp=function(e){t.kundentypenList.push(e),t.kundentypenList.sort(),n()},t.removeKundentyp=function(e){var r=t.kundentypenList.indexOf(e);r>=0&&t.kundentypenList.splice(r,1),n()}}]}}]),angular.module("openolitor-core").directive("ooArbeitskategorien",["ArbeitskategorienService",function(e){return{restrict:"E",replace:!0,scope:{arbeitskategorienList:"="},transclude:!0,templateUrl:"scripts/common/components/oo-arbeitskategorien.directive.html",controller:["$scope",function(t){var n=function(){t.arbeitskategorienList&&t.allArbeitskategorien&&(t.arbeitskategorien=[],angular.forEach(t.allArbeitskategorien,function(e){var n=e.kundentyp?e.kundentyp:e;t.arbeitskategorienList.indexOf(n)<0&&t.arbeitskategorien.push(n)}))};t.$watch(e.getArbeitskategorien,function(e){e&&(t.allArbeitskategorien=e,n())});var r=t.$watchCollection("arbeitskategorienList",function(){t.arbeitskategorienList&&t.arbeitskategorienList.length>0&&(n(),r())});t.addArbeitskategorie=function(e){t.arbeitskategorienList.push(e),t.arbeitskategorienList.sort(),n()},t.removeArbeitskategorie=function(e){var r=t.arbeitskategorienList.indexOf(e);r>=0&&t.arbeitskategorienList.splice(r,1),n()}}]}}]),angular.module("openolitor-core").directive("ooSaveButton",["msgBus","gettext","alertService","DataUtil",function(e,t,n,r){return{restrict:"E",replace:!0,scope:{entity:"@",entities:"=?",model:"=",onSave:"=",onCancel:"=",form:"=",onCreated:"=",condensed:"@?",notext:"@?",small:"@?"},transclude:!0,templateUrl:"scripts/common/components/oo-savebutton.directive.html",controller:["$scope",function(a){!angular.isUndefined(a.condensed)&&a.condensed&&(a.notext=!0,a.small=!0),a.isNew=function(){return!a.model||void 0===a.model.id};var o=function(e){return angular.isArray(a.entities)?a.entities.indexOf(e)>-1:a.entity===e};e.onMsg("EntityModified",a,function(e,t){o(t.entity)&&!angular.isUndefined(a.model)&&t.data.id===a.model.id&&(r.update(t.data,a.model),a.model.actionInProgress=void 0,a.$apply())}),e.onMsg("EntityCreated",a,function(e,t){a.model&&o(t.entity)&&t.data.id===a.model.id&&(r.update(t.data,a.model),a.model.actionInProgress=void 0,a.onCreated&&(console.log("try destroyConfirm"),a.form&&a.form.destroyConfirmOnDirty&&(console.log("call destroyConfirm"),a.form.destroyConfirmOnDirty()),a.onCreated(t.data.id)),a.$apply())}),a.save=function(){a.model.actionInProgress="updating";var e=a.onSave(a.model);angular.isUndefined(e.catch)?a.model.actionInProgress=void 0:e.catch(function(e){a.model.actionInProgress=void 0,n.addAlert("error",t(a.entity+" konnte nicht gespeichert werden. Fehler: ")+e.status+"-"+e.statusText+":"+e.data)})},a.cancel=function(){a.model.actionInProgress="updating",a.onCancel()}}]}}]),angular.module("openolitor-core").directive("ooActionsButton",["msgBus","gettext","alertService","DataUtil","dialogService",function(e,t,n,r,a){return{restrict:"E",replace:!0,scope:{entity:"@",entities:"=?",model:"=",actions:"=",form:"=",confirm:"@?",condensed:"@?",small:"@?",onCreated:"=",btnStyle:"@?"},transclude:!0,templateUrl:"scripts/common/components/oo-actionsbutton.directive.html",controller:["$scope",function(o){!angular.isUndefined(o.btnStyle)&&o.btnStyle||(o.btnStyle="btn-primary"),!angular.isUndefined(o.condensed)&&o.condensed&&(o.notext=!0,o.small=!0),o.isNew=function(){return!o.model||void 0===o.model.id};var i=function(e){return angular.isArray(o.entities)?o.entities.indexOf(e)>-1:o.entity===e};e.onMsg("EntityModified",o,function(e,a){i(a.entity)&&!angular.isUndefined(o.model)&&a.data.id===o.model.id&&("updating"!==o.model.actionInProgress?o.entity&&n.addAlert("info",o.entity+t(" wurde durch eine andere Person geändert. Bitte laden Sie die Ansicht neu.")):(r.update(a.data,o.model),o.model.actionInProgress=void 0,o.$apply()))}),e.onMsg("EntityCreated",o,function(e,t){o.model&&i(t.entity)&&t.data.id===o.model.id&&(r.update(t.data,o.model),o.model.actionInProgress=void 0,o.onCreated&&(o.form&&o.form.destroyConfirmOnDirty&&o.form.destroyConfirmOnDirty(),o.onCreated(t.data.id)),o.$apply())});var s=function(e,r,a,i,s){var l=t(e.label||e.labelFunction()),d=t(s.message),c=r&&t(o.entity)+": ";n.addAlert("error",c+t("Aktion")+' "'+l+'" '+t("konnte nicht ausgeführt werden. Fehler:")+" "+a+"-"+t(i)+": "+d)};o.execute=function(e){(!angular.isDefined(e.confirm)||e.confirm)&&angular.isDefined(o.confirm)&&o.confirm?a.displayDialogOkAbort(e.confirmMessage,function(){o.executeAction(e)}):o.executeAction(e)},o.executeAction=function(e){o.model.actionInProgress="updating";var t=e.onExecute(o.model);t&&t.catch?t.catch(function(t){o.model.actionInProgress=void 0,s(e,o.entity,t.status,t.statusText,t.data)}):o.model.actionInProgress=void 0}}]}}]),angular.module("openolitor-core").directive("ooDeleteButton",["msgBus","gettext","alertService","$uibModal",function(e,t,n,r){return{restrict:"E",replace:!0,scope:{entity:"@",entities:"=?",model:"=",onDelete:"=",form:"=",onDeleted:"=",confirm:"@?",confirmMessage:"=?",condensed:"@?",notext:"@?",small:"@?",buttonClass:"@?"},transclude:!0,templateUrl:"scripts/common/components/oo-deletebutton.directive.html",controller:["$scope",function(a){!angular.isUndefined(a.condensed)&&a.condensed&&(a.notext=!0,a.small=!0);var o=function(e){return angular.isArray(a.entities)?a.entities.indexOf(e)>-1:a.entity===e};e.onMsg("EntityDeleted",a,function(e,r){o(r.entity)&&r.data.id===a.model.id&&("deleting"!==a.model.actionInProgress?n.addAlert("info",t(a.entity+" wurde durch eine andere Person gelöscht.")):(a.model.actionInProgress=void 0,n.addAlert("info",t(a.entity+" wurde erfolgreich gelöscht.")),a.$apply()),angular.isDefined(a.onDeleted)&&a.onDeleted(r.data.id))}),a.getButtonTypeClass=function(){return angular.isUndefined(a.buttonClass)?"btn-danger":a.buttonClass},a.modalDialog=function(e){r.open({animation:!0,templateUrl:"scripts/common/components/oo-deletebutton.directive.modal.html",controller:"ooDeleteButtonModalInstanceCtrl",resolve:{message:function(){return a.confirmMessage}}}).result.then(function(){e()})},a.delete=function(){console.log("call delete"),angular.isDefined(a.confirm)&&a.confirm?a.modalDialog(function(){a.form&&a.form.destroyConfirmOnDirty&&(console.log("call destroyConfirm"),a.form.destroyConfirmOnDirty()),a.deleteAction()}):a.deleteAction()},a.deleteAction=function(){a.model.actionInProgress="deleting";var e=a.onDelete(a.model);e&&!angular.isUndefined(e.catch)?e.catch(function(e){a.model.actionInProgress=void 0,n.addAlert("error",t(a.entity+" konnte nicht gelöscht werden. Fehler: ")+e.status+"-"+e.statusText+":"+e.data)}):a.model.actionInProgress=void 0}}]}}]),angular.module("openolitor-core").controller("ooDeleteButtonModalInstanceCtrl",["$scope","$uibModalInstance",function(e,t){e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("openolitor-core").controller("ooDialogOkAbortModalInstanceCtrl",["$scope","$uibModalInstance","message","title","dismissOnly","dismissButtonTitle",function(e,t,n,r,a,o){e.title=r,e.message=n,e.dismissOnly=a,e.dismissButtonTitle=o,e.ok=function(){t.close()},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("openolitor-core").directive("ooStopEvent",[function(){return{restrict:"A",link:function(e,t){t.bind("click",function(e){e.stopPropagation()})}}}]),angular.module("openolitor-core").directive("ooGenerateReport",function(){return{restrict:"E",replace:!0,scope:{postPath:"=",onGenerated:"&",onClose:"&",defaultFileName:"=",ids:"=?",projektVorlagen:"=?",directDownload:"=?"},templateUrl:"scripts/common/components/oo-generate-report.directive.html",controller:["$scope","$http","API_URL","FileUtil","gettext","lodash","alertService",function(e,t,n,r,a,o,i){e.form={vorlage:void 0,projektVorlageId:void 0,pdfGenerieren:!0,pdfAblegen:!1,pdfDownloaden:!0,datenExtrakt:!1};var s=function(s){e.error=void 0,t.post(n+e.postPath,s,{headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(t){if(t.data.validationErrors&&t.data.validationErrors.length>0){var n=o.groupBy(t.data.validationErrors,"message"),s=Object.keys(n),l=o.map(s,function(e){return e+"("+n[e].length+")"});i.addAlert("warning",a("Beim erstellen der Dokumente sind folgende Fehler aufgetreten"),l)}else if(e.form.datenExtrakt||!angular.isUndefined(e.directDownload)&&e.directDownload){var d=t.headers("Content-Disposition"),c=JSON.stringify(t.data);r.open(d||e.defaultFileName,[c],{type:"application/json"})}e.generating=!1,e.onGenerated()()},function(t){console.log("Failed generating report",t),e.generating=!1,e.error=a("Bericht konnte nicht erzeugt werden")})};e.generate=function(){var t=new FormData;t.append("report",!0);for(var n in e.form)e.form[n]&&t.append(n,e.form[n]);e.ids&&angular.isArray(e.ids)&&t.append("ids",e.ids.toString()),e.generating=!0,s(t)},e.selectDatenExtrakt=function(){e.form.vorlage=void 0,e.form.datenExtrakt=!0,e.form.projektVorlageId=void 0},e.selectStandardVorlage=function(){e.form.vorlage=void 0,e.form.datenExtrakt=!1},e.selectProjektVorlage=function(t){e.form.projektVorlageId=t.id,e.form.vorlage=void 0,e.projektVorlage=t,e.form.datenExtrakt=!1},e.selectFile=function(t){t&&(e.form.vorlage=t)}}]}}),angular.module("openolitor-core").directive("ooSlidingDetail",function(){return{restrict:"E",replace:!0,scope:{slideIn:"&",slideOutFunction:"=?"},transclude:!0,templateUrl:"scripts/common/components/oo-sliding-detail.directive.html",controller:["$scope",function(e){e.$watch(e.slideIn,function(t){t?e.openNav():e.closeNav()}),e.openNav=function(){e.stateStyle={width:"400px",right:"0"}},e.closeNav=function(){e.stateStyle={width:"0",right:"-20px"}},e.callFctSlideOut=function(){angular.isDefined(e.slideOutFunction)&&"function"==typeof e.slideOutFunction?e.slideOutFunction():e.closeNav()}}]}}),angular.module("openolitor-core").factory("uuid",function(){return{new:function(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()},empty:function(){return"00000000-0000-0000-0000-000000000000"}}}),angular.module("openolitor-core").directive("ooDraggable",["$rootScope","uuid",function(e,t){return{restrict:"A",scope:{ooDragedType:"="},link:function(n,r,a,o){angular.element(r).attr("draggable","true");var i=angular.element(r).attr("id");i||(i=t.new(),angular.element(r).attr("id",i)),r.bind("dragstart",function(t){t.originalEvent.dataTransfer.setData("text",'{ "data": "'+i+'", "type": "'+n.ooDragedType+'" }'),e.$emit("OO-DRAG-START")}),r.bind("dragend",function(t){e.$emit("OO-DRAG-END")})}}}]),angular.module("openolitor-core").directive("ooDropTarget",["$rootScope","uuid",function(e,t){return{restrict:"A",scope:{onDrop:"&"},link:function(n,r,a,o){var i=angular.element(r).attr("id"),s=0;i||(i=t.new(),angular.element(r).attr("id",i)),r.bind("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="move",!1}),r.bind("dragenter",function(e){e.preventDefault&&e.preventDefault(),0===s&&angular.element("#"+i).addClass("oo-over"),s+=1}),r.bind("dragleave",function(e){e.preventDefault&&e.preventDefault(),0===(s-=1)&&angular.element("#"+i).removeClass("oo-over")}),r.bind("drop",function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();var r=t.originalEvent.dataTransfer.getData("text"),a=JSON.parse(r),o=a.data,l=a.type;s=0,e.$emit("OO-DRAG-END"),n.onDrop({dragEl:o,dropEl:i,type:l})}),e.$on("OO-DRAG-START",function(){var e=document.getElementById(i);angular.element(e).addClass("oo-target")}),e.$on("OO-DRAG-END",function(){var e=angular.element("#"+i);e.removeClass("oo-target"),e.removeClass("oo-over")})}}}]),angular.module("openolitor-core").factory("EnumUtil",["gettextCatalog",function(e){return{asArray:function(t){var n=[];return angular.forEach(t,function(t){this.push({id:t.id||t,label:t.label&&t.label.long&&e.getString(t.label.long)||e.getString(t),shortLabel:t.label&&t.label.short&&e.getString(t.label.short)||e.getString(t),title:e.getString(t),value:t.value||t})},n),n}}}]),angular.module("openolitor-core").factory("DataUtil",function(){return{update:function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}}),angular.module("openolitor-core").factory("FileUtil",["$document","$timeout","$http","API_URL",function(e,t,n,r){var a=function(n,r,a,o){var i=o||"utf-8",s=a||"*",l=new Blob([r],{type:s+";charset="+i+";"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(l,n);else{var d=/filename[^;=\n]*=((['"])(.*?)\2|[^;\n]*)/.exec(n);d&&d.length>0&&(d.length>3&&d[3]?n=d[3]:d.length>1&&d[1]&&(n=d[1]));var c=angular.element("<a></a>");c.attr("href",window.URL.createObjectURL(l)),c.attr("download",n),c.attr("target","_blank"),e.find("body").append(c),t(function(){c[0].click(),c.remove()},null)}},o=function(e,t,o,i,s,l){n({method:e,url:r+t,data:o,responseType:"arraybuffer"}).then(function(e){var t=e.headers("Content-Disposition"),n=e.headers("Content-Type");a(t||i,e.data,n||s),l&&l(e)})};return{open:a,downloadGet:function(e,t,n,r){return o("GET",e,{},t,n,r)},downloadPost:function(e,t,n,r,a){return o("POST",e,t,n,r,a)}}}]),angular.module("openolitor-core").factory("FilterQueryUtil",function(){function e(e){return e.replace(n,function(e,t,n,r){return r+"-"+n+"-"+t})}var t=/(\w+?)\s*(<=|>=|!=|=|<|>)\s*(.+?)\s*(;| |$)/g,n=/(\d{2})\.(\d{2})\.(\d{4})/g;return{transform:function(n){for(var r,a="";null!==(r=t.exec(n));){var o=r[1],i=r[2],s=e(r[3]),l=i.replace(">=","=~gte").replace("<=","=~lte").replace(">","=~gt").replace("<","=~lt").replace("!=","=~!");a=l!==i?a.concat(o,l+"("+s+");"):a.concat(o,l,s+";")}return a},withoutFilters:function(e){var n="";return n=e.replace(t,""),n=n.trim()}}}),angular.module("openolitor-core").factory("OverviewCheckboxUtil",function(){return{checkboxWatchCallback:function(e,t){angular.isUndefined(e.filteredEntries)?angular.forEach(e.entries,function(n){e.checkboxes.items[n.id]=t}):angular.forEach(e.filteredEntries,function(n){e.checkboxes.items[n.id]=t})},dataCheckboxWatchCallback:function(e){var t=0,n=0,r=e.filteredEntries.length;e.checkboxes.ids=[],e.checkboxes.checkedItems=[],e.checkboxes.data||(e.checkboxes.data={}),angular.forEach(e.filteredEntries,function(r){t+=e.checkboxes.items[r.id]||0,n+=!e.checkboxes.items[r.id]||0,e.checkboxes.items[r.id]&&(e.checkboxes.ids.push(r.id),e.checkboxes.checkedItems.push(r)),e.checkboxes.data[r.id]=r}),0===n||0===t?(e.checkboxes.checked=t===r&&t>0,e.checkboxes.checkedAny=t>0):0!==t&&0!==n?(e.checkboxes.css="select-all:indeterminate",e.checkboxes.checkedAny=!0):(e.checkboxes.css="select-all",e.checkboxes.checkedAny=!0)}}}),angular.module("openolitor-core").factory("GeschaeftsjahrUtil",function(){function e(e,t,n){this.start=function(n){angular.isUndefined&&(n=new Date);var r=new Date(n.getFullYear(),e,t,0,0,0,0);return n<r?(r.setFullYear(r.getFullYear()-1),r):r},this.key=function(n){angular.isUndefined&&(n=new Date);var r=this.start(n);return 1===e&&1===t?r.getFullYear():r.getMonth()+1+"/"+r.getFullYear},this.isIn=function(r){var a=n;angular.isUndefined(a)&&(a=(new Date).getFullYear());var o=t;angular.isUndefined(o)&&(o=1);var i=new Date(a,e-1,o),s=new Date(a+1,e-1,o);return r>i&&r<s},this.isInOrLater=function(r){var a=n;angular.isUndefined(a)&&(a=(new Date).getFullYear());var o=t;return angular.isUndefined(o)&&(o=1),r>new Date(a,e-1,o)}}var t=function(t,n,r){angular.isUndefined(r)&&(r=new Date);var a;return angular.forEach(t,function(t){if(angular.isUndefined(t.key)||-1===t.key.indexOf("/"))new e(1,1,t.key).isIn(r)&&(a=t);else{var n=t.key.split("/");new e(n[0],1,n[1]).isIn(r)&&(a=t)}}),angular.isUndefined(a)&&!angular.isUndefined(n)&&(a={key:new e(n.geschaeftsjahrMonat,n.geschaeftsjahrTag).key(r),value:0}),a};return{isInCurrentGJ:function(t,n){return new e(t.geschaeftsjahrMonat,t.geschaeftsjahrTag).isIn(n)},isInCurrentOrLaterGJ:function(t,n){return new e(t.geschaeftsjahrMonat,t.geschaeftsjahrTag).isInOrLater(n)},getMatchingGJItem:t,setOnMatchingGJItem:function(e,n,r){var a=t(e,r);angular.isUndefined(a)||(a.value=n)}}}),angular.module("openolitor-core").factory("ooClientMessageService",["$http","$location","$q","$interval","$rootScope","$log","msgBus","API_WS_URL","BUILD_NR","ooAuthService",function(e,t,n,r,a,o,i,s,l,d){var c,u,g=function(e,t){var n=JSON.stringify(t),r='{"type":"'+e+'"'+(n?","+n.substring(1):"")+"}";try{o.debug("sending message: "+r),a.messagingSocket.send(r)}catch(e){o.error("error sending message: i"+e)}},p=function(e){var t=new WebSocket(e);return t.onmessage=function(e){var t=convertDateStringsToDates(JSON.parse(e.data));console.log("WS received event",t),i.emitMsg(t)},t.onopen=function(e){console.log("WS onopen : "+e),g("HelloServer",{client:"angularClient_"+l}),angular.isUndefined(u)||(r.cancel(u),u=void 0),u=r(function(){var e=(new Date).getTime();g("ClientPing",{time:e})},9e4),angular.isUndefined(c)||(r.cancel(c),c=void 0,i.emitMsg({type:"WebSocketOpen"})),a.$watch(function(){return d.getToken()},function(e){o.debug("Token changed, login/logout to websocket",e),e?g("Login",{token:e}):g("Logout")})},t.onclose=function(t){var n;n=1e3===t.code?"Normal closure, meaning that the purpose for which the connection was established has been fulfilled.":1001===t.code?"An endpoint is 'going away', such as a server going down or a browser having navigated away from a page.":1002===t.code?"An endpoint is terminating the connection due to a protocol error":1003===t.code?"An endpoint is terminating the connection because it has received a type of data it cannot accept (e.g., an endpoint that understands only text data MAY send this if it receives a binary message).":1004===t.code?"Reserved. The specific meaning might be defined in the future.":1005===t.code?"No status code was actually present.":1006===t.code?"The connection was closed abnormally, e.g., without sending or receiving a Close control frame":1007===t.code?"An endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [http://tools.ietf.org/html/rfc3629] data within a text message).":1008===t.code?"An endpoint is terminating the connection because it has received a message that 'violates its policy'. This reason is given either if there is no other sutible reason, or if there is a need to hide specific details about the policy.":1009===t.code?"An endpoint is terminating the connection because it has received a message that is too big for it to process.":1010===t.code?"An endpoint (client) is terminating the connection because it has expected the server to negotiate one or more extension, but the server didn't return them in the response message of the WebSocket handshake. <br /> Specifically, the extensions that are needed are: "+t.reason:1011===t.code?"A server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.":1015===t.code?"The connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).":"Unknown reason",o.debug("WS closed with a reason:"+n,t,new Date),i.emitMsg({type:"WebSocketClosed",reason:n}),angular.isUndefined(c)&&(c=r(function(){a.messagingSocket=p(e)},5e3))},t};return{send:g,start:function(){o.debug("registering websocket, request websocket url");var e=s.replace("http://","ws://").replace("https://","wss://");o.debug("registering websocket, bind to "+e);var t=e;angular.isDefined(a.messagingSocket)||"@@"===e.substring(0,2)||(a.messagingSocket=p(t))}}}]),angular.module("openolitor-core").factory("alertService",["$injector",function(e){function t(e){e.alerts||(e.alerts=[])}var n=e.get("$rootScope"),r=e.get("$timeout");return{addAlert:function(e,a,o){var i={type:e,msg:a,details:o};t(n),n.alerts.push(i),"info"!==e&&"lighterror"!==e||r(function(){var e=n.alerts.indexOf(i);e>-1&&n.alerts.splice(e,1)},"info"===e?1e3:3e3,!0)},removeAllAlerts:function(){n.alerts=[]},removeAlert:function(){return function(e){t(n),n.alerts.splice(e,1)}}}}]);var checkAuth=function(e,t,n,r,a){n.$on("$routeChangeStart",function(e,n,o){return t.authorize(n.access).then(function(e){a.debug("check authorization:"+n.access+" -> "+e),e||t.isLoggedIn().then(function(e){e?r.path("/forbidden"):r.path("/login")})})})};checkAuth.$inject=["$q","ooAuthService","$rootScope","$location","$log"],angular.module("openolitor-core").factory("ooAuthService",["$http","$location","$q","$cookies","$log","API_URL",function(e,t,n,r,a,o){var i,s=r.get("XSRF-TOKEN"),l=function(){return e.get(o+"auth/user").then(function(e){return i=e.data,a.debug("Login succeeded:"+i),i})},d=function(){var e=n.defer();return i?e.resolve(i):s?(a.debug("Restoring user from cookie..."),l().then(function(t){i=t,e.resolve(t)},function(){a.debug("Token no longer valid, please log in."),s=void 0,r.remove("XSRF-TOKEN"),e.reject("Token invalid")})):(i={id:"",rolle:"Guest"},e.resolve(i)),e.promise};return{loggedIn:function(e){return r.put("XSRF-TOKEN",e),a.debug("logged in",e),l().then(function(t){return a.debug("resolved user after login",t),i=t,s=e,t})},loggedOut:function(){r.remove("XSRF-TOKEN"),s=void 0,i=void 0,t.$$search={},a.debug("Good bye")},resolveUser:d,getUser:function(){return i},getToken:function(){return s},authorize:function(e){return d().then(function(t){return a.debug("authorize:",e+" => "+t.rolle),void 0===e||e===userRoles.Guest||e===t.rolle||Array.isArray(e)&&(e.indexOf(userRoles.Guest)>-1||e.indexOf(t.rolle)>-1)})},isLoggedIn:function(){return d().then(function(e){return e.rolle!==userRoles.Guest})},isUserLoggedIn:function(e){return void 0!==e&&e.rolle!==userRoles.Guest}}}]).factory("requestSecurityInjector",["$cookies","moment","$log",function(e,t,n){return{request:function(n){var r=e.get("XSRF-TOKEN");if(r){var a=r+"::"+t().toISOString();n.headers["XSRF-TOKEN"]=a}return n}}}]).config(["$httpProvider",function(e){e.interceptors.push("requestSecurityInjector"),e.defaults.withCredentials=!0}]).run(checkAuth),angular.module("openolitor-core").factory("dialogService",["$uibModal",function(e){return{displayDialogOkAbort:function(t,n,r,a,o){e.open({animation:!0,templateUrl:"scripts/common/components/oo-dialogokabort.directive.modal.html",controller:"ooDialogOkAbortModalInstanceCtrl",resolve:{message:function(){return t},title:function(){return r},dismissOnly:function(){return a},dismissButtonTitle:function(){return o}}}).result.then(n)}}}]),angular.module("openolitor-core").directive("ooConfirmOnDirty",["dialogService","$location",function(e,t){return{restrict:"A",require:"form",link:function(n,r,a,o){console.log("form: "+o);var i=void 0;if("boolean"==typeof o.$dirty){console.log("lamda creation: "+o.$dirty);i=function(){return console.log("lamda execution: "+o.$dirty),o.$dirty}}if("function"==typeof n.ooConfirmOnDirty&&(i=n.ooConfirmOnDirty),i){console.log("dirty function found!"),window.onbeforeunload=function(e){if(i()){var t="Do you want to leave this site?";return e.returnValue=t,t}};var s=n.$on("$locationChangeStart",function(n,r,a){if(i()){a.split("?")[0];var o=r.split("?")[0];n.preventDefault(),e.displayDialogOkAbort("Do you want to leave?",function(){window.onbeforeunload=void 0,s(),t.path(o.substring(t.absUrl().length-t.url().length))})}});o.destroyConfirmOnDirty=function(){console.log("form.destroConfirmOnDirty called"),window.onbeforeunload=void 0,s()},n.$on("$destroy",function(){window.onbeforeunload=void 0,s()})}}}}]),angular.module("openolitor-core").controller("NgTableExportController",["$scope","$element","exportTable","FileSaver",function(e,t,n,r){e.showExport=!1;var a="Export";angular.isDefined(t.parent().parent().parent().parent())&&(a=t.parent().parent().parent().parent().attr("export-file-name"),e.showExport=t.parent().parent().parent().parent().attr("display-export")),e.exportData=function(){var e={};angular.isDefined(t.parent().parent().parent().scope().params.settings().exportODSFilter)&&(e=t.parent().parent().parent().scope().params.settings().exportODSFilter()),t.parent().parent().parent().scope().params.settings().exportODSModel.exportODS(e,e,function(e){r.saveAs(e.response,a+".ods")})}}]),angular.module("openolitor-core").controller("NgTableCountController",["$scope","$cookies",function(e,t){var n=function(e,t){var n,r=t.split("."),a=e;for(n=0;n<r.length;++n){if(void 0===a[r[n]])return;a=a[r[n]]}return a},r=function(e){t.put("ngTableCount",e)},a=function(){var e=t.get("ngTableCount");return angular.isUndefined(e)&&(e=25),e};e.count=function(t){n(e.$parent,"params").count(t),r(t)},e.fetchStoredCount=function(){return a()},n(e.$parent,"params").count(e.fetchStoredCount())}]),angular.module("openolitor-core").directive("autoFocus",["$timeout",function(e){return{restrict:"AC",link:function(t,n){e(function(){n[0].focus()},50)}}}]),angular.module("openolitor-core").directive("httpSrc",["$http",function(e){return{restrict:"A",link:function(t,n,r){function a(e){var t,n,r,a=new Uint8Array(e),o="";for(t=0,n=a.length;t<n;t+=5e3)r=a.subarray(t,t+5e3),o+=String.fromCharCode.apply(null,r);return btoa(o)}var o={method:"GET",responseType:"arraybuffer",cache:"true"};r.$observe("httpSrc",function(t){t&&(o.url=t,e(o).then(function(e){r.$set("src","data:image/jpeg;base64,"+a(e.data))}))})}}}]),angular.module("openolitor-core").directive("localdate",["moment",function(e){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.unshift(function(e){return e?new Date(e.getTime()-60*e.getTimezoneOffset()*1e3):e})}}}]),angular.module("openolitor-core").controller("LoginController",["$scope","$rootScope","$http","API_URL","ENV","gettext","$rootElement","alertService","$timeout","$location","$route","$routeParams","ooAuthService","$interval",function(e,t,n,r,a,o,i,s,l,d,c,u,g,p){e.loginData={},e.resetPasswordData={},e.secondFactorData={},e.changePwd={neu:void 0,alt:void 0,neuConfirmed:void 0},e.initPassword={neu:void 0,neuConfirmed:void 0,token:void 0},e.status="login",e.env=a,e.secondFactorCountdown=600,e.secondFactorCountdownDate=function(){return moment().add(e.secondFactorCountdown,"seconds")},e.originalTgState=t.tgState,t.tgState=!1;var m=function(n,r){s.addAlert("info",o("Willkommen")+" "+r.vorname+" "+r.name),l(function(){d.path("/"),e.status="login",t.tgState=e.originalTgState},1e3),g.loggedIn(n)},f=function(e){angular.isUndefined(e)||s.addAlert("info",o("Aufwiedersehen")+" "+e.vorname+" "+e.name)};e.appName=i.attr("ng-app");var h=function(t,a){var o=g.getUser();n.post(r+"auth/logout").then(function(){e.loginData.message=void 0,g.loggedOut(),t&&f(o),l(function(){e.status="login",a&&""!==a?d.path("/login").search("msg",a):d.path("/login")},1e3)})},v=function(){s.addAlert("info",o("Passwort wurde erfolgreich geändert, Sie werden automatisch ausgelogged.")),h(!1,o("Passwort wurde erfolgreich geändert, Sie wurden automatisch ausgelogged. Bitte loggen Sie sich mit dem neuen Passwort erneut an."))},b=function(){s.addAlert("info",o("Das Passwort wurde erfolgreich gesetzt. Sie können sich nun anmelden.")),l(function(){d.path("/login")},1e3)},w=function(){s.addAlert("info",o("Anweisungen um Ihr Passwort neu zu setzten wurden Ihnen an Ihre Email-Adresse gesendet.")),l(function(){d.path("/")},1e3)};c.current.$$route.logout&&h(!0);var y=u.msg;y&&""!==y&&(e.loginData.message=y),e.login=function(){e.loginForm.$valid&&n.post(r+"auth/login",e.loginData).then(function(t){e.loginData.message=void 0,"LoginSecondFactorRequired"===t.data.status?(e.status="twoFactor",e.person=t.data.person,e.secondFactorData.token=t.data.token,e.cancelSecondFactorTimer=p(function(){e.secondFactorCountdown--,0===e.secondFactorCountdown&&(p.cancel(e.cancelSecondFactorTimer),e.resetForm())},1e3,0)):m(t.data.token,t.data.person)},function(t){e.loginData.message=o(t.data)})},e.secondFactorLogin=function(){e.secondFactorForm.$valid&&n.post(r+"auth/secondFactor",e.secondFactorData).then(function(t){e.secondFactorData.message=void 0,e.cancelSecondFactorTimer&&p.cancel(e.cancelSecondFactorTimer),m(t.data.token,t.data.person)},function(t){e.secondFactorData.message=o(t.data)})},e.changePassword=function(){e.changePwdForm.$valid&&n.post(r+"auth/passwd",e.changePwd).then(function(){e.changePwd.message=void 0,v()},function(t){e.changePwd.message=o(t.data)})},e.setPassword=function(){e.setPasswordForm.$valid&&(e.initPassword.token=u.token,n.post(r+"auth/zugangaktivieren",e.initPassword).then(function(){e.initPassword.message=void 0,b()},function(t){e.initPassword.message=o(t.data)}))},e.resetPassword=function(){e.resetPasswordForm.$valid&&n.post(r+"auth/passwordreset",e.resetPasswordData).then(function(){e.resetPasswordData.message=void 0,w()},function(t){e.resetPasswordData.message=o(t.data)})},e.resetForm=function(){e.loginData={},e.status="login"}}]),angular.module("openolitor-core").factory("ServerModel",["$resource","API_URL",function(e,t){return e(t+"status/staticInfo/",{},{query:{method:"GET",isArray:!1}})}]),angular.module("openolitor-core").factory("ServerService",["$rootScope","ServerModel",function(e,t){var n;return t.query({},function(e){n=e}),{getStaticServerInfo:function(){return n}}}]),angular.module("openolitor-core").run(["gettextCatalog",function(e){e.setStrings("en",{"#":"#","# Lieferungen bisher:":"# Deliveries so far:","%":"%","+41 ...":"+41 ...","+41 7...":"+41 7...","+41...":"+41 ...",$:"$","£":"£","€":"€","2.0":"2.0",Abbrechen:"Quit",Abo:"Subscription","Abo erstellen":"Create subscription","Abo erstellen für {{kunde.bezeichnung}}":"Create a subscription for {{}} kunde.bezeichnung","Abo für":"subscription for",Abos:"Subscriptions",Abotyp:"subscription type","Abotyp ' + abotyp.name || 'Abotyp":"Subscription type '  abotyp.name || 'subscription type","Abotyp erstellen":"Create a subscription type","Abotyp hinzufügen:":"Add subscription type:",Abotypen:"Subscription types","Abweichende Lieferadresse":"Differing Delivery Address",Abwesenheiten:"Abscenses","Administrations-Anteil":"Administration Share","Administrationsumgebung für":"Administration platform",Adresse:"Address",Adresszusatz:"Extra address line","Aktion  für  konnte nicht ausgeführt werden. Fehler:":"This action could not be executed. Error:",Aktiv:"Active",Aktuell:"Current",alle:"all","Alle Spalten einblenden":"Show all columns","Alternative E-Mail-Adresse":"Alternate Email Address",Anprechperson:"contact person",Anrede:"Title",Anschrift:"Designation","Anschrift oder Bezeichnung":"Designation","Ansprechperson hinzufügen":"Add contact person",Anzahl:"Quantity","Anzahl aktive Abonnemente":"Number of active subscriptions","Anzahl Lieferungen":"# Deliveries so far:","Anzahl Soll-Abwesenheiten":"Number of targeted absences",Apr:"Apr",April:"April",Aug:"Aug",August:"August",Ausstehend:"not paid",Bank:"Bank","Bank, PLZ Ort":"Bank, Postcode City",Basisdaten:"Basic data",Bearbeitet:"Processed","Bearbeitet:":"Processed:",Bemerkungen:"Remarks","Bemerkungen zu diesem Produzenten":"Remarks concerning this producer","Bemerkungen zu dieser Person":"Remarks concerning this person",Beschreibung:"Description",Betrag:"Amount",bezahlt:"paid",Bezahlt:"Paid",Bezeichnung:"Designation",bis:"until",Bis:"to","Bitte wählen...":"Please select...","Britisches Pfund":"UK Pound","Bu.":"Acc.",Buchhaltung:"Accounting",Bund:"Bunch",CAD:"CAD","CH...":"CH","CHE-xxx.yyy.zzz MWST":"CHE xxx.yyy.zzz VAT",CHF:"CHF",Dateien:"Files",Depot:"Depot","Depot erstellen":"Create Depot","Depot:":"Depot:",Depotlieferung:"Depot Delivery",DepotlieferungAbo:"Depot DeliverySuscription",Depotname:"Depot name",Depots:"depots",Dez:"Dec",Dezember:"December",DI:"TUES",Dienstag:"Tuesday","Diese Seite konnte nicht gefunden werden!":"The page cannot be found","Dieser Abotyp ist derzeit nicht aktiv":"This subscription type is not currently active",DO:"THURS",Donnerstag:"Thursday","E-Mail":"Email","Einbezahlter Betrag":"amount paid","Eindeutige Bezeichnung":"unique name","Eine manuelle Rechnung für":"A manual invoice for",Eingangsdatum:"Receipt of payment","Einkauf*":"Purchase",Einstellungen:"Settings","Einstellungen editieren":"edit settings",Email:"Email","Email alt.":"Other Email",Erledigt:"Done","Error 404":"Error 404",erstellen:"create",Erstellen:"Create",Erstellt:"Created","Erstellt:":"Created:",ESR:"ESR","Etage, Hinterlegung, ...":"Floor, deposit, ...",Euro:"Euros","Fälligkeitsdatum":"Date due","Farbe-Code":"Color Code",Feb:"Feb",Februar:"February",FR:"FRI",Frau:"Mrs.",Freitag:"Friday","Für Anzahl Lieferungen":"For number of deliveries","Geplante Lieferdaten":"Planned Delivery Dates",gr:"gr",Gramm:"Gram",Guthaben:"Credit balance","Guthaben Mindestbestand":"Credit balance minimum",Heimlieferung:"Home Delivery",HeimlieferungAbo:"Home Delivery subscription",Herr:"Mr",IBAN:"IBAN",Inaktiv:"Inactive",InBearbeitung:"In Progress",Ja:"Yes",Jan:"Jan",Januar:"January",Jul:"July",Juli:"July",Jun:"June",Juni:"June","Kanadischer Dollar":"Canadian Dollar","Keine Kunden":"No customers",kg:"kg",Kilogramm:"kilograms",Konfigurationen:"Configurations","konnte nicht gelöscht werden. Fehler:":"could not be deleted. Error:","konnte nicht gespeichert werden. Fehler:":"could not be saved. Error:",Kontaktdaten:"Contact Information",Kontodaten:"Account data",KRZ:"ACR",Kunde:"Participant","Kunde erstellen":"Create a participant","Kunde Nr.":"No participant",Kunden:"Participants","Kunden E-Mail erforderlich":"Participant Email required",Kundentyp:"Participant type","Kundentyp Name...":"Participant type Name...",Kundentypen:"Participant Types",Kurzzeichen:"Acronym",Laufzeit:"Contract period","Letzte Lieferung":"Last delivery","Lieferdaten erstellen":"Create Delivery Dates","Lieferdaten generieren":"generate delivery data",Lieferdatum:"Delivery date",Lieferplanungen:"delivery planning",Lieferrhythmus:"delivery frequency",Liefertag:"Delivery day",Lieferung:"Delivery","Lieferung vom":"Delivery of",Lieferungen:"Deliveries",Logo:"Logo","Logo auswählen oder einfügen":"Select or insert Logo","Löschen":"Delete",MahnungVerschickt:"reminder Sent",Mai:"May",Mar:"Mar","März":"March","Maximal Abos pro Liefertag":"Maximum baskets per delivery day",Menge:"Quantity","Menge / Einheit":"Quantity/unit","Menge Total":"Total amount",MI:"WED",Mittwoch:"Wednesday",MO:"MON",Monate:"months",Monatlich:"Monthly",Montag:"Monday",MWST:"VAT","MWST-Nr":"VAT No.","MWST-Pflicht":"VAT liability","MWST-Satz":"VAT rate",Name:"Name","Name / Betrieb":"Name / farm","Name oder Betriebsbezeichnung":"Name or company name","Name oder Bezeichnung":"Name or designation",Nein:"No",Neu:"New","Neue Bezeichnung":"New designation","Neue Lieferplanung generieren":"Generate New Delivery Planning","Neue Pendenz":"New open issue","Neues Abo":"new subscription",NichtErledigt:"Not done",Nov:"Nov",November:"November",Nr:"No.",Offen:"open","Öffnungszeiten":"Opening hours",Okt:"Oct",Oktober:"October",Ort:"City",pendente:"pending",Pendenzen:"Open Issues","Pendenzen / History":"Open Issues / history",Planung:"Planning","Planung #{{planung.nr}}: Korbinhalt":"Planning # {{}} planung.nr: Basket content","Planung #{{planung.nr}}: Zusammenzug Lieferanten":"Planning # {{}} planung.nr: alle producers","Planung abschliessen":"finish planning",PLZ:"Post Code","PLZ / Ort":"Postal code/City","Postfach, c/o, ...":"Mailbox, c / o ...","Postfach, Etage, c/o, ...":"Mailbox, Floor, c / o ...",Postlieferung:"post Delivery",PostlieferungAbo:"Post Delivery Subscription",Preis:"Price","Preis / Einheit":"Price/ Unit","Preis / Packung":"Price / pack","Preise editierbar":"Prices editable","Preise sichtbar / relevant":"Prices visible / relevant",pro:"per","pro Lieferung":"per delivery",Produkt:"Product","Produkt erstellen":"Create a product","Produktbez.":"Product des.",Produkte:"Products","Produkte-Angebot":"Products in the list","Produktekategorie Name...":"Product Category name ...",Produktekategorien:"Product Categories",Produzent:"Producer","Produzent erstellen":"Create producer",Produzenten:"Producers","Produzenten-Übersicht":"List of producers",Projekt:"Project",Projekteinstellungen:"Project Settings",Rechnung:"Invoice","Rechnung erstellen":"Generate invoice",Rechnungen:"Invoices",Rechnungsadresse:"Invoicing address",Rechnungsdaten:"Billing details",Rechnungsdatum:"Invoice date",Referenznummer:"Reference No.","Reports*":"Reports",SA:"SA",Samstag:"Saturday",Satz:"Rate","Schweizer Franken":"Swiss Franc",Sep:"Sept",September:"September","Sind Sie sicher?":"Are you sure?",SO:"SUN","Soll der Löschvorgang fortgesetzt werden?":"Is the deleting operation to be continued?",Sonntag:"Sunday",speichern:"Save",Speichern:"Save","St.":"piece",Stammdaten:"Basic data",Start:"Start","Start des Geschäftsjahres":"Start of the accounting year",Status:"Status",Storniert:"Cancelled",Strasse:"Street","Strasse / Nr.":"Street/no.","Stück":"Piece","Suche in Übersicht...":"Search in overview",Summe:"Total",Telefon:"Telephone","Telefon Festnetz":"Telephone, landline","Telefon Mobil":"Telephone, mobile/cell","Text...":"Text...",Titel:"Title",total:"total",Total:"Total","Total (inkl. MWST)":"Total inc. VAT","Total über alle Lieferungen":"Total of all deliveries","Total über alle Lieferungen (inkl. MWST)":"Total of all deliveries (incl. VAT)",Tour:"Tour","Tour erstellen":"Create Tour","Tour:":"Tour:",Touren:"Tours","Übersicht der Körbe":"List of all baskets",Unbeschraenkt:"Unlimited",Unregelmaessig:"Irregular","US Dollar":"US Dollar","Verantwortliche Person":"Responsible person",verrechnet:"invoiced",Verschickt:"Sent",Vertraglich:"contractual",Vertriebsart:"Distribution type",Vertriebsarten:"Distribution types",Von:"By","Vorlagen*":"Templates",Vorname:"First name","Währung":"Currency","Weitere Aktionen":"Other Actions","Wichtigste Spalten einblenden":"Show Main Columns","Wird standartmässig geplant":"Is planned \tregularly",Woechentlich:"Weekly","wurde durch eine andere Person geändert. Bitte laden Sie die Ansicht neu.":"has been changed by another person. Please refresh the display.","wurde durch eine andere Person gelöscht.":"was deleted by another person.","wurde erfolgreich gelöscht.":"has been successfully deleted.",Zielpreis:"target price",Zusatzdaten:"Additional data",Zusatzinfos:"additional info","Zuviel bezogene Körbe verrechnen":"Create invoice for unpaid baskets ",Zweiwoechentlich:"Fortnightly"}),e.setStrings("fr_BE",{Abmelden:"se déconnecter","Das Backend steht im Moment nicht zur Verfügung. Bitte besuchen Sie uns später wieder.":"Le back-end est momentanément ineccessible. Merci de revenir un peu plus tard.","Diese Seite konnte nicht gefunden werden!":"La page demandée n’a pas été trouvée","Eingabe erforderlich":"Champ obligatoir","Eingabe stimmt nicht übereint":"Les données ne correspondent pas","Eingabe zu kurz":"Les données sont trop courtes","Eingage zu lang":"Les données sont trop longues",Einstellungen:"Paramètres","Error 404":"Erreur 404","Fehlerhafte Email Adresse":"adresse e-mail erronné","OpenOlitor Mitgliederportal für":"OpenOlitor portail de membres pour","Passwort wechseln":"Changer mot de passe"}),e.setStrings("fr_CH",{"- Entwicklungsumgebung":"- Plateforme de développement","- Testumgebung":"- Plateforme de Test",Abbrechen:"Annuler",Abmelden:"Se déloguer",Abos:"Abonnements",Abotypen:"Types d'abonnement",Anmelden:"Se connecter",Anmeldung:"Bonjour",Apr:"Avr",April:"Avril",Aufwiedersehen:"Au revoir",Aug:"Août",August:"Août",Ausstehend:"dû",Bezahlt:"Payé","Britisches Pfund":"Livre sterling","Bu.":"Compt.",Buchhaltung:"Comptabilité",Bund:"Bouquet",CAD:"CAD",CHF:"CHF",DI:"MAR",DO:"JEU","Das Backend steht im Moment nicht zur Verfügung. Bitte besuchen Sie uns später wieder.":"Le serveur n'est actuellement pas à disposition. Veuillez réessayer dans un instant.",Depotlieferung:"Livraison à dépôt",DepotlieferungAbo:"Abonnement livraison à dépôt",Depots:"Dépôts",Dez:"Déc.",Dezember:"Décembre","Die Daten in diesem System werden sporadisch auf die Standardwerte zurückgesetzt.":"Les données sont réinitialisés de temps en temps. ",Dienstag:"Mardi","Diese Seite konnte nicht gefunden werden!":"La page demandée n’a pas été trouvée",Donnerstag:"Jeudi","E-Mail Adresse":"adresse email","E-Mail:":"Adresse email:","Einkauf*":"Commandes",Einstellungen:"Paramètres","Email Adresse":"adresse email",Erledigt:"Clos","Error 404":"Erreur 404",Erstellen:"Créer",Erstellt:"Créé",Euro:"Euro",FR:"FR",Feb:"FEV",Februar:"Février",Frau:"Madame",Freitag:"Vendredi","Für das Testen der Administrationsumgebung, bitte hier klicken!":"Pour tester le système en tant qu'administrateur, cliquez ici!","Für den Zugang auf die Administrationsumgebung von OpenOlitor, bitte den Link unten rechts verwenden.":"Pour accéder en tant qu'administrateur, veuillez utiliser le lien en bas à droit.","Für den Zugriff auf OpenOlitor ist eine Anmeldung erforderlich":"Pour accéder OpenOlitor, veuillez-vous annoncer.","Für den Zugriff auf die Administrationsumgebung ist eine Anmeldung erforderlich":"Pour accéder au système d'administration, veuillez-vous annoncer.",Gramm:"gramme",Heimlieferung:"Livraison à domicile",HeimlieferungAbo:"Abonnement livraison à domicile",Herr:"Monsieur",Ja:"Oui",Jan:"JAN",Januar:"Janvier",Jul:"JUL",Juli:"Juillet",Jun:"Juin",Juni:"Juin","Kanadischer Dollar":"Dollar canadien",Kilogramm:"kilogramme",Kunden:"Participants",Lieferung:"Livraison",Lieferungen:"Livraisons","Löschen":"Supprimer",MI:"ME",MO:"LU",MahnungVerschickt:"Rappel-envoyé",Mai:"Mai",Mar:"Mar",Mittwoch:"Mercredi",Monate:"Mois",Monatlich:"Mensuel",Montag:"Lundi","März":"Mars",Nein:"Non",NichtErledigt:"non achevé",Nov:"Nov",November:"Novembre",Offen:"Ouvert",Ok:"Ok",Okt:"Oct",Oktober:"Octobre",Passwort:"mot de passe","Passwort vergessen?":"Vous avez oublié votre mot de passe?","Passwort:":"Mot de passe:",Pendenzen:"Liste des affaires en suspens",Postlieferung:"Livraison par poste",PostlieferungAbo:"Abonnement de livraison par poste",Produkte:"Produits",Produzenten:"Producteurs",Projekt:"Initiative",Rechnungen:"Factures","Reports*":"Rapports",SA:"SA",SO:"SO",Samstag:"Samedi","Schweizer Franken":"Francs suisses",Sep:"Sep",September:"Septembre","Sie befinden sich auf dem OpenOlitor Testsystem. Sie können sich mit den untenstehenden Anmeldeinformationen als Konsument anmelden:":"Vous vous trouvez sur le système de test de la plateforme OpenOlitor. Avec les données ci-dessous vous pouvez vous connecter en tant que consommateur:","Sie befinden sich auf dem OpenOlitor Testsystem. Sie können sich mit den untenstehenden Anmeldeinformationen an der Administrationsumgebung anmelden:":"Vous vous trouvez sur le système de test de la plateforme OpenOlitor. Avec les données ci-dessous vous pouvez vous connecter en tant que administrateur:","Sind Sie sicher?":"Êtes-vous sûr?","Soll der Löschvorgang fortgesetzt werden?":"Souhaitez-vous poursuivre de supprimer ces données?",Sonntag:"Dimanche","St.":"Pièce",Stammdaten:"Données de base",Storniert:"Annulé","Stück":"Pièce",Touren:"Tours","US Dollar":"US Dollar",Unbeschraenkt:"illimitée",Unregelmaessig:"irrégulièrement",Verschickt:"Envoyé","Vorlagen*":"Modèles*","Weitere Aktionen":"Autres actions",Woechentlich:"Hebdomadaire",Zweiwoechentlich:"Quinzomadaire",erstellen:"créer",gr:"gr",kg:"kg","konnte nicht gelöscht werden. Fehler:":"ne pouvait pas être supprimé. Erreur:","konnte nicht gespeichert werden. Fehler:":"ne pouvait pas être  sauvegardé. Erreur:",pro:"par",speichern:"sauvegarder","wurde durch eine andere Person gelöscht.":"a été supprimé/e par une autre personne.","wurde durch eine andere Person geändert. Bitte laden Sie die Ansicht neu.":"a été supprimé/e par une autre personne, Veuillez actualiser cette page.","wurde erfolgreich gelöscht.":"a été supprimé avec succès."})}]),angular.module("openolitor-core").run(["$templateCache",function(e){e.put("scripts/common/components/oo-actionsbutton.directive.html",'<span><div class="btn-group"><button ng-click="execute(actions[0])" ng-disabled="actions[0].isDisabled() || form.$invalid || model.actionInProgress" type="button" class="btn {{ btnStyle }}"><i class="{{ actions[0].iconClass ? actions[0].iconClass : \'fa fa-floppy-o\'}}"></i> <span ng-if="!notext && !actions[0].noText && !actions[0].noEntityText">{{entity | translate}}</span> <span ng-if="!notext && !actions[0].noText">{{actions[0].labelFunction() || actions[0].label | translate}}</span> <i ng-show="model.actionInProgress === \'updating\'" ng-cloak class="fa fa-circle-o-notch fa-spin"></i></button> <button ng-disabled="actions.length < 2 || model.actionInProgress" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span> <span class="sr-only" translate>Weitere Aktionen</span></button><ul ng-if="actions.length > 1" class="dropdown-menu"><li ng-if="!$first" ng-repeat="action in actions" ng-class="{disabled: action.isDisabled()}"><a href="" ng-click="!action.isDisabled() && execute(action)"><i class="{{ action.iconClass ? action.iconClass : \'fa fa-floppy-o\'}}"></i> <span ng-if="!notext && !actions.noText && !action.noEntityText">{{entity | translate}}</span> <span ng-if="!notext && !action.noText">{{action.label | translate}}</span></a></li></ul></div></span>'),e.put("scripts/common/components/oo-arbeitskategorien.directive.html",'<div class="btn-group" data-toggle="buttons"><label ng-repeat="arbeitskategorie in arbeitskategorienList" class="btn btn-primary btn-sm">{{arbeitskategorie}} <i ng-if="arbeitskategorienList.length > 1" class="fa fa-times" ng-click="removeArbeitskategorie(arbeitskategorie)"></i></label><div class="btn-group" role="group"><button ng-show="arbeitskategorien.length > 0" class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="arbeitskategorie in arbeitskategorien"><a href="" ng-click="addArbeitskategorie(arbeitskategorie)">{{arbeitskategorie}}</a></li></ul></div></div>'),e.put("scripts/common/components/oo-deletebutton.directive.html",'<span><button type="button" ng-click="delete()" ng-disabled="model.actionInProgress" class="btn" ng-class="[{\'btn-sm\':small}, getButtonTypeClass()]"><i class="fa fa-times"></i> <span ng-if="!notext">Löschen</span> <i ng-show="model.actionInProgress === \'deleting\'" class="fa fa-circle-o-notch fa-spin" ng-cloak></i></button></span>'),e.put("scripts/common/components/oo-deletebutton.directive.modal.html",'<div class="modal-header"><h3 translate>Sind Sie sicher?</h3></div>\'<div class="modal-body"><div><span ng-if="message">{{message()}}</span> <span ng-if="!message" translate>Soll der Löschvorgang fortgesetzt werden?</span></div></div><div class="modal-footer"><button type="button" class="btn btn-danger" ng-show="true" ng-click="ok()" translate>Löschen</button> <button type="button" class="btn btn-primary" ng-click="cancel()" translate>Abbrechen</button></div>'),e.put("scripts/common/components/oo-dialogokabort.directive.modal.html",'<div class="modal-header"><h3 ng-if="title" translate>{{title | translate}}</h3><h3 ng-if="!title" translate>Bestätigung</h3></div><div class="modal-body"><div><span ng-if="message">{{message}}</span> <span ng-if="!message" translate>Wollen Sie fortfahren?</span></div></div><div class="modal-footer"><button ng-if="!dismissOnly" type="button" class="btn btn-danger" ng-show="true" ng-click="ok()" translate>Ok</button> <button ng-if="dismissButtonTitle" type="button" class="btn btn-primary" ng-click="cancel()">{{dismissButtonTitle | translate}}</button> <button ng-if="!dismissButtonTitle" type="button" class="btn btn-primary" ng-click="cancel()" translate>Abbrechen</button></div>'),e.put("scripts/common/components/oo-dropdown.directive.html",'<span><div ng-if="label" class="navbar-header navbar-brand">{{label}}</div><ul ng-if="displayStyle === \'navbar\'" class="nav navbar-nav"><li uib-dropdown class="uib-dropdown"><a href="#" uib-dropdown-toggle class="uib-dropdown-toggle" data-toggle="uib-dropdown" data-target="#" role="button" aria-haspopup="true" aria-expanded="false" ng-disabled="disabled"><span ng-if="!isPlaceholder">{{display|translate}}</span> <span class="placeholder" ng-if="isPlaceholder">{{placeholder|translate}}</span> <span class="caret"></span></a><ul class="dropdown-menu" role="menu" area-labeled-by="{{dropdownId}}"><li ng-repeat="item in values" role="menuitem"><a href="" ng-click="select(item)">{{getDisplayedText(item)|translate}}</a></li></ul></li></ul><div ng-if="displayStyle === \'uib-dropdown\'" uib-dropdown><button type="button" uib-dropdown-toggle class="btn btn-default uib-dropdown-toggle" ng-class="getClass()" data-toggle="uib-dropdown" aria-haspopup="true" aria-expanded="false" ng-disabled="disabled"><span ng-if="!isPlaceholder">{{display|translate}}</span> <span class="placeholder" ng-if="isPlaceholder">{{placeholder|translate}}</span> <span class="caret"></span></button><ul class="dropdown-menu dropdown-menu-right" role="menu" area-labeled-by="{{dropdownId}}"><li ng-repeat="item in values" role="menuitem"><a href="" ng-click="select(item)">{{getDisplayedText(item)|translate}}</a></li></ul></div></span>'),e.put("scripts/common/components/oo-erroroverlay.directive.html",'<span class="error-overlay" ng-cloak ng-show="!!alerts"><div uib-alert class="alert alert-{{(alert.type === \'error\' || alert.type === \'lighterror\' ) ? \'danger\' : alert.type}} alert-dismissible" ng-repeat="alert in alerts" type="{{ alert.type }}" close="$removeAlert($index)"><span>{{ alert.msg }}<ul ng-if="alert.details"><li ng-repeat="detail in alert.details">{{ detail }}</li></ul></span></div></span>'),e.put("scripts/common/components/oo-generate-report.directive.html",'<div class="panel panel-default"><div class="panel-heading clearfix"><h3 class="panel-title"><i class="fa fa-print" aria-hidden="true"></i> <span translate>Bericht erstellen</span> <span class="pull-right" ng-show="generating"><i class="fa fa-circle-o-notch fa-spin fa-lg"></i></span></h3></div><div class="panel-body"><form name="berichtForm"><div class="row form-group" ng-show="error"><div class="col-md-12"><div class="alert alert-danger">{{error}}</div></div></div><div class="row form-group"><div class="col-md-12"><label for="vorlage" translate>Vorlage</label></div><div class="col-md-12"><div class="btn-group" uib-dropdown><button id="split-button" type="button" class="btn btn-primary"><span ng-hide="form.vorlage || projektVorlage || form.datenExtrakt" translate>Standardvorlage</span> <span ng-show="form.datenExtrakt" translate>Datenextrakt</span> <span ng-show="form.vorlage" translate>{{form.vorlage.name}}</span> <span ng-show="projektVorlage" translate>{{projektVorlage.name}}</span></button> <button type="button" class="btn btn-default" uib-dropdown-toggle><span class="caret"></span> <span class="sr-only"></span></button><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="split-button"><li role="menuitem"><a ng-click="selectStandardVorlage()" translate>Standardvorlage</a></li><li role="menuitem" ng-repeat="vorlage in projektVorlagen" ng-if="vorlage.fileStoreId"><a ng-click="selectProjektVorlage(vorlage)" translate>{{vorlage.name}}</a></li><li class="divider"></li><li role="menuitem"><a ng-model="form.vorlage" name="vorlageFile" ngf-accept="\'.odt\'" ngf-max-size="10MB" ngf-select="selectFile($file)" ngf-drop="selectFile($file)" translate>Benutzerdefiniert...</a></li><li class="divider"></li><li role="menuitem"><a ng-click="selectDatenExtrakt()" translate>Datenextrakt</a></li></ul></div></div></div><div class="row form-group" ng-hide="form.datenExtrakt"><div class="col-md-5"><label for="pdfGenerieren" translate>PDF Erstellen</label></div><div class="col-md-7"><input bs-switch ng-model="form.pdfGenerieren" type="checkbox" switch-size="medium" switch-animate="true" switch-on-text="{{\'Ja\'|translate}}" switch-off-text="{{\'Nein\'|translate}}" switch-on-color="success" switch-off-color="danger" switch-radio-off="false" ng-true-value="true" ng-false-value="false"></div></div><div class="row form-group" ng-show="!form.datenExtrakt && form.pdfGenerieren"><div class="col-md-5"><label for="pdfAblegen" translate>PDF Ablegen</label></div><div class="col-md-7"><input bs-switch ng-model="form.pdfAblegen" type="checkbox" switch-size="medium" switch-animate="true" switch-on-text="{{\'Ja\'|translate}}" switch-off-text="{{\'Nein\'|translate}}" switch-on-color="success" switch-off-color="danger" switch-radio-off="false" ng-true-value="true" ng-false-value="false"></div></div><div class="row form-group" ng-show="!form.datenExtrakt && form.pdfAblegen"><div class="col-md-5"><label for="pdfDownload" translate>Herunterladen</label></div><div class="col-md-7"><input bs-switch ng-model="form.pdfDownloaden" type="checkbox" switch-size="medium" switch-animate="true" switch-on-text="{{\'Ja\'|translate}}" switch-off-text="{{\'Nein\'|translate}}" switch-on-color="success" switch-off-color="danger" switch-radio-off="false" ng-true-value="true" ng-false-value="false"></div></div><div class="row form-group"><div class="col-md-12"><span class="pull-right"><a href="" role="button" ng-disabled="berichtForm.$invalid || generating" ng-click="generate()" class="btn btn-primary"><i class="fa fa-share-square-o" aria-hidden="true"></i> <span translate>Erstellen</span></a> <a href="" role="button" ng-disabled="generating" ng-click="onClose()()" class="btn btn-danger"><i class="fa fa-times"></i> <span translate>Abbrechen</span></a></span></div></div></form></div></div>'),e.put("scripts/common/components/oo-kundentypen.directive.html",'<div class="btn-group" data-toggle="buttons"><label ng-repeat="kundentyp in kundentypenList" class="btn btn-primary btn-sm">{{kundentyp}} <i class="fa fa-times" ng-click="removeKundentyp(kundentyp)"></i></label><div class="btn-group" role="group"><button ng-show="kundentypen.length > 0" class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><span class="caret"></span></button><ul class="dropdown-menu"><li ng-repeat="kundentyp in kundentypen"><a href="" ng-click="addKundentyp(kundentyp)">{{kundentyp}}</a></li></ul></div></div>'),e.put("scripts/common/components/oo-liefertage.directive.html",'<div class="btn-group" role="group" data-toggle="buttons"><label ng-repeat="lt in liefertage" class="btn btn-xs btn-default" ng-click="selectedLiefertag(lt)" ng-class="isSelected(lt)">{{lt.shortLabel}}</label></div>'),e.put("scripts/common/components/oo-savebutton.directive.html",'<span><button ng-click="save()" ng-disabled="form.$invalid || model.actionInProgress" class="btn btn-primary" ng-class="{\'btn-sm\':small}"><i class="fa fa-floppy-o"></i> <span ng-transclude></span> <span ng-if="!notext && isNew()" translate>erstellen</span> <span ng-if="!notext && !isNew()" translate>speichern</span> <i ng-show="model.actionInProgress === \'updating\'" ng-cloak class="fa fa-circle-o-notch fa-spin"></i></button>\x3c!--button ng-click="cancel()" ng-disabled="model.actionInProgress" class="btn btn-default" translate>Abbrechen</button--\x3e</span>'),e.put("scripts/common/components/oo-sliding-detail.directive.html",'<div class="sliding-detail" ng-style="stateStyle"><div class="content"><div class="row"><div class="col-md-12"><a role="button" ng-click="callFctSlideOut()" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span> <span translate>Schliessen</span></a></div></div><span ng-transclude></span></div></div>'),e.put("scripts/common/ngtable/oo-ngtable-noPaginationTemplate.html","<span>"),e.put("scripts/common/ngtable/oo-ngtable-paginationTemplate.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"><div ng-controller="NgTableCountController" ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"><button ng-repeat="cnt in params.settings().counts" type="button" ng-show="cnt <= params.settings().total" ng-class="{\'active\':params.count() == cnt}" ng-click="count(cnt)" class="btn btn-default"><span ng-bind="cnt"></span></button> <button type="button" ng-class="{\'active\':params.count() >= params.settings().total}" ng-click="count(Number.MAX_VALUE)" class="btn btn-default"><span translate>Alle</span> <span>({{params.settings().total}})</span></button></div><div ng-controller="NgTableExportController" class="ng-table-export"><button ng-click="exportData()" ng-show="showExport" class="btn btn-default"><span class="fa fa-table"></span></button></div><ul ng-if="pages.length" class="pagination ng-table-pagination"><li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"><a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a></li></ul></div>'),e.put("scripts/login/change_password.html",'<div class="row"><div oo-error-overlay></div><div class="container"><div class="jumbotron"><h3 translate>Eigenes Passwort wechseln</h3><p></p><div class="container" ng-show="status === \'login\'"><div class="alert alert-danger" role="alert" ng-if="changePwd.message">{{changePwd.message}}</div><form class="form-signin" name="changePwdForm"><div class="form-group"><input type="password" name="oldPassword" class="form-control" placeholder="{{\'Aktuelles Passwort\' | translate}}" required ng-model="changePwd.alt"><div ng-show="changePwdForm.oldPassword.$dirty && changePwdForm.oldPassword.$invalid" ng-messages="changePwdForm.oldPassword.$error"><div ng-messages-include="messages.html"></div></div></div><div class="form-group"><input type="password" name="newPassword" class="form-control" placeholder="{{\'Neues Passwort\' | translate}}" required ng-model="changePwd.neu" ng-minlength="6" ng-maxlength="50" ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z])/"><div ng-show="changePwdForm.newPassword.$dirty && changePwdForm.newPassword.$invalid" ng-messages="changePwdForm.newPassword.$error"><div class="messages"><div ng-message="required" translate>Eingabe erforderlich</div><div ng-message="minlength" translate>Das Passwort muss aus mindestens 6 Zeichen bestehen</div><div ng-message="pattern" translate>Das Passwort muss mindestens einen Gross- und Kleinbuchstaben, sowie einen numerischen Wert oder ein Symbol enthalten</div><div ng-message="ooCompareTo" translate>Passworteingabe stimmt nicht übereint</div></div></div></div><div class="form-group"><label for="passwortStrength" translate>Passwortstärke</label><div ng-password-strength="changePwd.neu" css-mode="bootstrap" strength="passStrength" inner-class="progress-bar" inner-class-prefix="progress-bar-"></div></div><div class="form-group"><input type="password" class="form-control" name="confirmPassword" placeholder="{{\'Passwort wiederholen\' | translate}}" required ng-model="changePwd.neuConfirmed" oo-compare-to="changePwd.neu"><div ng-show="changePwdForm.confirmPassword.$dirty && changePwdForm.confirmPassword.$invalid" ng-messages="changePwdForm.confirmPassword.$error"><div class="messages"><div ng-message="required" translate>Eingabe erforderlich</div><div ng-message="ooCompareTo" translate>Passworteingabe stimmt nicht übereint</div></div></div></div><div class="form-group"><button ng-disabled="changePwdForm.$invalid || env === \'test\'" class="btn btn-lg btn-primary" type="submit" ng-click="changePassword()" translate>Passwort wechseln</button></div></form></div><p></p></div></div></div>'),e.put("scripts/login/forbidden.html",'<div class="row"><div oo-error-overlay></div><div class="container"><div class="alert alert-danger"><h1 translate>Zugriff verweigert</h1><p translate>Der Zugriff auf diese Ressource wurde verweigert.</p></div></div></div>'),e.put("scripts/login/login.html",'<div class="row"><div oo-error-overlay></div><div class="container"><div class="jumbotron"><h1><span translate>Anmeldung</span> <small ng-if="env === \'test\'" translate>- Testumgebung</small> <small ng-if="env === \'dev\'" class="" translate>- Entwicklungsumgebung</small></h1><span ng-if="appName === \'openolitor-admin\'"><p translate>Für den Zugriff auf die Administrationsumgebung ist eine Anmeldung erforderlich</p><div class="alert alert-info" ng-if="env === \'test\' || env === \'dev\'"><span translate>Sie befinden sich auf dem OpenOlitor Testsystem. Sie können sich mit den untenstehenden Anmeldeinformationen an der Administrationsumgebung anmelden:</span><br><br><ul><li><span translate>E-Mail:</span> <b>admin@openolitor.ch</b></li><li><span translate>Passwort:</span> <b>admin</b></li></ul><br><span translate>Die Daten in diesem System werden sporadisch auf die Standardwerte zurückgesetzt.</span></div></span><span ng-if="appName !== \'openolitor-admin\'"><p translate>Für den Zugriff auf OpenOlitor ist eine Anmeldung erforderlich</p><div class="alert alert-info" ng-if="env === \'test\' || env === \'dev\'"><span translate>Sie befinden sich auf dem OpenOlitor Testsystem. Sie können sich mit den untenstehenden Anmeldeinformationen als Konsument anmelden:</span><br><br><ul><li><span translate>E-Mail:</span> <b>konsument@openolitor.ch</b></li><li><span translate>Passwort:</span> <b>kunde</b></li></ul><br><span translate>Für den Zugang auf die Administrationsumgebung von OpenOlitor, bitte den Link unten rechts verwenden.</span><br><span translate>Die Daten in diesem System werden sporadisch auf die Standardwerte zurückgesetzt.</span></div></span><span ng-show="projekt.welcomeMessage1 && (!projekt.maintenanceMode || appName === \'openolitor-admin\')"><div class="alert alert-info"><p>{{projekt.welcomeMessage1}}</p></div></span><span ng-show="projekt.maintenanceMode && appName !== \'openolitor-admin\'"><div class="alert alert-info"><p translate>Das Kundenportal ist gegenwärtig nicht verfügbar. Wir führen Unterhaltsarbeiten durch. In Kürze sind wir wieder online und wie gewohnt für Sie da.</p></div></span><span ng-show="projekt.maintenanceMode && appName === \'openolitor-admin\'"><div class="alert alert-info"><p translate>Unterhalts-Moduls! Das Kundenportal ist gegenwärtig nicht verfügbar. Bitte sobald wie möglich wieder aktivieren!</p></div></span><span ng-show="!projekt.maintenanceMode || appName === \'openolitor-admin\'"><p></p><div class="container" ng-show="status === \'login\'"><div class="alert alert-danger" role="alert" ng-if="loginData.message">{{loginData.message}}</div><form class="form-signin" name="loginForm"><div class="form-group"><input type="email" class="form-control" placeholder="{{\'E-Mail Adresse\' | translate}}" required autofocus ng-model="loginData.email"></div><div class="form-group"><input type="password" class="form-control" placeholder="{{\'Passwort\' | translate}}" required ng-model="loginData.passwort"></div><div class="form-group"><button ng-disabled="loginForm.$invalid" class="btn btn-lg btn-primary" type="submit" ng-click="login()" translate>Anmelden</button></div><div class="form-group"><a ng-href="#/passwordreset" translate>Passwort vergessen?</a></div></form><div class="pull-right" ng-if="appName !== \'openolitor-admin\'"><a class="btn btn-xs btn-default" href="/admin/#" tooltip-placement="left" tooltip-enable="(env === \'test\' || env === \'dev\')" tooltip-is-open="true" uib-tooltip-html="\'Für das Testen der Administrationsumgebung, bitte hier klicken!\' | translate" translate>Login Administration</a></div></div><div class="container" ng-show="status === \'twoFactor\'"><div class="alert alert-info" role="alert"><span translate>Es wurde ein Zugangscode an ihre Email-Adresse</span> <b>{{person.email}}</b> <span translate>zugestellt.</span></div><div class="alert alert-danger" role="alert" ng-if="secondFactorForm.message">{{secondFactorForm.message}}</div><form class="form-signin" name="secondFactorForm"><div class="form-group"><input type="text" class="form-control" placeholder="{{\'Zugangscode\' | translate}} - {{secondFactorCountdownDate() | fromNow}} {{\'läuft dieser Loginversuch ab\'}}" required autofocus ng-model="secondFactorData.code"></div><div class="form-group"><button ng-disabled="secondFactorForm.$invalid" class="btn btn-lg btn-primary" type="submit" ng-click="secondFactorLogin()" translate>Anmelden</button></div><div class="form-group"><a ng-href="#/login" ng-click="resetForm()" translate>Zugangscode erneut versenden</a></div></form></div><p></p></span></div></div></div>'),e.put("scripts/login/logout.html",'<div class="row"><div class="content content-box col-md-9"><div oo-error-overlay></div></div></div>'),e.put("scripts/login/passwordreset.html",'<div class="row"><div oo-error-overlay></div><div class="container"><div class="jumbotron"><h3 translate>Passwort vergessen?</h3><div class="alert alert-info" translate>Wenn Sie ihr Passwort vergessen haben, können Sie sich einen Reset-Link senden lassen.</div><p></p><div class="container"><div class="alert alert-danger" role="alert" ng-if="resetPasswordData.message">{{resetPasswordData.message}}</div><form class="form-signin" name="resetPasswordForm"><div class="form-group"><input type="email" class="form-control" placeholder="{{\'Email Adresse\' | translate}}" required autofocus ng-model="resetPasswordData.email"></div><div class="form-group"><button ng-disabled="resetPasswordForm.$invalid" class="btn btn-lg btn-primary" type="submit" ng-click="resetPassword()" translate>Passwort zurücksetzen</button></div></form></div><p></p></div></div></div>'),e.put("scripts/login/zugangaktivieren.html",'<div class="row"><div oo-error-overlay></div><div class="container"><div class="jumbotron"><h3 translate>Passwort setzen und Zugang aktivieren</h3><p></p><div class="container"><div class="alert alert-danger" role="alert" ng-if="initPassword.message">{{initPassword.message}}</div><form class="form-signin" name="setPasswordForm"><div class="form-group"><input type="password" name="newPassword" class="form-control" placeholder="{{\'Passwort\' | translate}}" required ng-model="initPassword.neu" ng-minlength="6" ng-maxlength="50" ng-pattern="/(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z])/"><div ng-show="setPasswordForm.newPassword.$dirty && setPasswordForm.newPassword.$invalid" ng-messages="setPasswordForm.newPassword.$error"><div class="messages"><div ng-message="required" translate>Eingabe erforderlich</div><div ng-message="minlength" translate>Das Passwort muss aus mindestens 6 Zeichen bestehen</div><div ng-message="pattern" translate>Das Passwort muss mindestens einen Gross- und Kleinbuchstaben, sowie einen numerischen Wert oder ein Symbol enthalten</div><div ng-message="ooCompareTo" translate>Passworteingabe stimmt nicht übereint</div></div></div></div><div class="form-group"><label for="passwortStrength" translate>Passwortstärke</label><div ng-password-strength="initPassword.neu" css-mode="bootstrap" strength="passStrength" inner-class="progress-bar" inner-class-prefix="progress-bar-"></div></div><div class="form-group"><input type="password" class="form-control" name="confirmPassword" placeholder="{{\'Passwort wiederholen\' | translate}}" required ng-model="initPassword.neuConfirmed" oo-compare-to="initPassword.neu"><div ng-show="setPasswordForm.confirmPassword.$dirty && setPasswordForm.confirmPassword.$invalid" ng-messages="setPasswordForm.confirmPassword.$error"><div class="messages"><div ng-message="required" translate>Eingabe erforderlich</div><div ng-message="ooCompareTo" translate>Passworteingabe stimmt nicht übereint</div></div></div></div><div class="form-group"><button ng-disabled="setPasswordForm.$invalid || env === \'test\'" class="btn btn-lg btn-primary" type="submit" ng-click="setPassword()" translate>Passwort setzen</button></div></form></div><p></p></div></div></div>'),e.put("scripts/not-found.html",'<div class="row"><div class="content content-box col-md-9"><div oo-error-overlay></div><div class="panel panel-default"><div class="panel-heading clearfix"><h3 class="panel-title"><span class="navbar-brand" translate>Error 404</span></h3></div><div class="panel-body"><span translate>Diese Seite konnte nicht gefunden werden!</span></div></div></div></div>')}]);